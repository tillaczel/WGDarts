<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WG Darts</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .selected {
            border: 20px solid #3498db; /* Change border color to indicate selection */
            background-color: #ecf0f1; /* Change background color to indicate selection */
        }

        #start-game-button {
            margin-top: 100px; /* Add some top margin for spacing */
            font-size: 20px; /* Adjust the font size to make it bigger */
            padding: 10px 20px; /* Add padding for better visual appearance */
        }
    </style>
    <script>
        var selectedPlayers = {};

        function toggleSelection(playerId) {
            var card = document.getElementById('player-card-' + playerId);
            if (selectedPlayers[playerId]) {
                delete selectedPlayers[playerId];
                card.classList.remove('selected');
            } else {
                selectedPlayers[playerId] = true;
                card.classList.add('selected');
            }
        }

        function startGame() {
            var selectedPlayerIds = Object.keys(selectedPlayers);
            if (selectedPlayerIds.length < 2) {
                alert('Please select at least two players to start the game.');
                return false;
            }
            // Submit the form with selected player IDs
            document.getElementById('start-game-form').submit();
        }
    </script>
</head>
<body>
    <h1>WG Darts</h1>

    <!-- Players List -->
    <h2>Players List</h2>
    <div class="player-container">
        {% for player in players %}
            <div class="player-card" id="player-card-{{ player.id }}" onclick="toggleSelection('{{ player.id }}')">
                <img src="static/uploads/{{ player.img_path }}" alt="Player Image" class="player-image">
                <h3 class="player-name">{{ player.name }}</h3>
                <p class="player-rating">{{ player.rating }}</p>
            </div>
        {% endfor %}
    </div>

    <!-- Form to Start Game -->
    <form id="start-game-form" action="{{ url_for('start_game') }}" method="post">
        {% for player in players %}
            <input type="hidden" name="selected_players" id="input-player-{{ player.id }}">
        {% endfor %}
    </form>

    <!-- "Start Game" button at the bottom of the page -->
    <button id="start-game-button" type="button" onclick="startGame()">Start Game</button>
</body>
</html>
